@if (Users == null)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
    <MudGrid Spacing="0" Class="d-flex justify-space-between">
        <MudItem xs="12" md="5">
            <MudText Typo="Typo.h6">@L["Resource Administration"]</MudText>
        </MudItem>
        <MudItem xs="12" md="5">
            <MudTextField Class="d-flex justify-end"
                      @bind-Value="searchString"
                      Placeholder=@L["Search"]
                      Adornment="Adornment.Start"
                      Immediate="true"
                      AdornmentIcon="@Icons.Material.Filled.Search"
                      IconSize="Size.Medium"></MudTextField>
        </MudItem>
    </MudGrid>
    <MudDataGrid Items="Users" T="ApplicationUser" Dense="true" Sortable="true" Hover="true" Bordered="false" Striped="false" QuickFilter="QuickFilter">
        <ToolBarContent>

            <MudButton Style="color: var(--mud-palette-info-darken)!important; border-color: var(--mud-palette-info-darken)" Size="Size.Small" OnClick="@(()=> EditProfile(new ApplicationUser()))" Variant="Variant.Outlined">@L["New User"]</MudButton>
        </ToolBarContent>
<Columns>
            @if (ShareResource.IsEn())
            {
                <Column T="ApplicationUser" Title="Department">
                    <CellTemplate>
                        @(context.Department==null? "unassigned" : context.Department.Name)
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Photo">
                    <CellTemplate>
                        <MudAvatar Image="@context.PhotoPath" Size="Size.Large" />
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="First Name">
                    <CellTemplate>
                        @context.FirstName
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Last Name">
                    <CellTemplate>
                        @context.LastName
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="date Of Birth">
                    <CellTemplate>
                       @context.DateOfBirth?.ToShortDateString()
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Is Active">
                    <CellTemplate>
                         @(context.IsActive?"Yes":"No")
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Actions">
                    <CellTemplate>
                         <MudButtonGroup Style="text-align: center;" Size="Size.Small" DataLabel="Actions" Variant="Variant.Outlined" OverrideStyles="false">
                <MudButton Style="color: var(--mud-palette-info-darken)!important; border-color: var(--mud-palette-info-darken)" OnClick="@(()=>EditProfile(context))" Variant="Variant.Outlined">@L["Edit User"]</MudButton>
                <MudButton Style="color: var(--mud-palette-success-darken)!important; border-color: var(--mud-palette-success-darken)" OnClick="@(()=>ShowProfile(context))"  Variant="Variant.Outlined">@L["Show profile"]</MudButton>
            </MudButtonGroup>
                    </CellTemplate>
                </Column>
            }
            else{
                                <Column T="ApplicationUser" Title="Dział">
                    <CellTemplate>
                         @(context.Department==null? "nieprzypisany" : context.Department.NamePl)
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Zdjęcie">
                    <CellTemplate>
                        <MudAvatar Image="@context.PhotoPath" Size="Size.Large" />
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Imię">
                    <CellTemplate>
                        @context.FirstName
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Nazwisko">
                    <CellTemplate>
                        @context.LastName
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Data urodzenia">
                    <CellTemplate>
                        @context.DateOfBirth?.ToShortDateString()
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Jest aktywny">
                    <CellTemplate>
                        @(context.IsActive?"Tak":"Nie")
                    </CellTemplate>
                </Column>
                <Column T="ApplicationUser" Title="Działania">
                    <CellTemplate>
                         <MudButtonGroup Style="text-align: center;" Size="Size.Small" DataLabel="Actions" Variant="Variant.Outlined" OverrideStyles="false">
                <MudButton Style="color: var(--mud-palette-info-darken)!important; border-color: var(--mud-palette-info-darken)" OnClick="@(()=>EditProfile(context))" Variant="Variant.Outlined">Edytuj użytkownika</MudButton>
                <MudButton Style="color: var(--mud-palette-success-darken)!important; border-color: var(--mud-palette-success-darken)" OnClick="@(()=>ShowProfile(context))"  Variant="Variant.Outlined">Pokaż profil</MudButton>
            </MudButtonGroup>
                    </CellTemplate>
                </Column>
            }
        </Columns>
        <PagerContent>
            <MudDataGridPager T="ApplicationUser" RowsPerPageString=@L["Next people"] />
        </PagerContent>
    </MudDataGrid>
}
