@if (Users == null)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
    <MudText Typo="Typo.h6">@L["Resource Administration"]</MudText>
    <MudTable Items="@Users" Dense="true" Hover="true" Bordered="true" Striped="false" Filter="new Func<ApplicationUser,bool>(FilterFunc1)" SortLabel=@L["Sort By"]>
        <ToolBarContent>
            <MudTextField @bind-Value="SearchString" Placeholder=@L["Search"] Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
            <MudButton OnClick="@(()=> EditProfile(new ApplicationUser()))" Class="pa-2 mx-2" Variant="Variant.Filled" Color="Color.Primary">@L["New"]</MudButton>
        </ToolBarContent>
        <HeaderContent>
            <MudTh Style="text-align: center;"><MudTableSortLabel SortBy="new Func<ApplicationUser, object>(x=>x.Department.Name)" SortLabel=@L["Department"] T="ApplicationUser">@L["Department"]</MudTableSortLabel></MudTh>
            <MudTh Style="text-align: center;">@L["Photo"]</MudTh>
            <MudTh Style="text-align: center;"><MudTableSortLabel SortBy="new Func<ApplicationUser, object>(x=>x.FirstName)" SortLabel=@L["First Name"] T="ApplicationUser">@L["First Name"]</MudTableSortLabel></MudTh>
            <MudTh Style="text-align: center;"><MudTableSortLabel SortBy="new Func<ApplicationUser, object>(x=>x.LastName)" SortLabel=@L["Last Name"] T="ApplicationUser">@L["Last Name"]</MudTableSortLabel></MudTh>
            <MudTh Style="text-align: center;"><MudTableSortLabel SortBy="new Func<ApplicationUser, object>(x=>x.DateOfBirth?.Date)" SortLabel=@L["Date Of Birth"] T="ApplicationUser">@L["Birth Date"]</MudTableSortLabel></MudTh>
            <MudTh Style="text-align: center;"><MudTableSortLabel SortBy="new Func<ApplicationUser, object>(x=>x.IsActive)" SortLabel=@L["Is Active"] T="ApplicationUser">@L["Is Active"]</MudTableSortLabel></MudTh>
            <MudTh Style="text-align: center;">@L["Action"]</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd Style="text-align: center;" DataLabel=@L["Department"]>@(context.Department==null? @L["unassigned"] : @L[context.Department.Name])</MudTd>
            <MudTd Style="text-align: center;" DataLabel=@L["Photo"]><MudAvatar Image="@context.PhotoPath" Size="Size.Large" /></MudTd>
            <MudTd Style="text-align: center;" DataLabel=@L["First Name"]>@context.FirstName</MudTd>
            <MudTd Style="text-align: center;" DataLabel=@L["Last Name"]>@context.LastName</MudTd>
            <MudTd Style="text-align: center;" DataLabel=@L["Date Of Birth"]>@context.DateOfBirth?.ToShortDateString()</MudTd>
            <MudTd Style="text-align: center;" DataLabel=@L["Is Active"]><MudCheckBox Disabled="true" @bind-Checked="@context.IsActive"></MudCheckBox></MudTd>
            <MudTd Style="text-align: center;" DataLabel="Action">
             @*   @if(user.Identity.Name!=context.Email){*@
               
                <MudButton OnClick="@(()=> EditProfile(context))" Color="Color.Tertiary">@L["Edit User"]</MudButton>
                @*}*@              
           <MudButton OnClick="@(()=>ShowProfile(context))" Color="Color.Success">@L["Show profile"]</MudButton>
            </MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager RowsPerPageString=@L["Next people"] />
        </PagerContent>
    </MudTable>
}