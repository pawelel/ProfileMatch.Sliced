@if (Users == null)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
    <MudGrid Spacing="0" Class="d-flex justify-space-between">
        <MudItem xs="12" md="5">
            <MudText Typo="Typo.h6">@L["Resource Administration"]</MudText>
        </MudItem>
        <MudItem xs="12" md="5">
            <MudTextField Class="d-flex justify-end"
                      @bind-Value="searchString"
                      Placeholder=@L["Search"]
                      Adornment="Adornment.Start"
                      Immediate="true"
                      AdornmentIcon="@Icons.Material.Filled.Search"
                      IconSize="Size.Medium"></MudTextField>
        </MudItem>
    </MudGrid>
    <MudDataGrid Items="Users" T="DepartmentUserVM" Dense="true" Sortable="true" Hover="true" Bordered="false" Striped="false" QuickFilter="QuickFilter">
        <ToolBarContent>

            <MudButton Color="Color.Primary" Size="Size.Small" OnClick="@(()=> EditProfile())" Variant="Variant.Outlined">@L["New User"]</MudButton>
        </ToolBarContent>
<Columns>
            @if (ShareResource.IsEn())
            {
                  <Column T="DepartmentUserVM" Field="DepartmentId" Title="Department Id" />
                <Column T="DepartmentUserVM" Field="DepartmentName" Title="Department">
                    <CellTemplate>
                        @(string.IsNullOrWhiteSpace(context.DepartmentName)? "unassigned" : context.DepartmentName)
                    </CellTemplate>
                </Column>
                <Column T="DepartmentUserVM" Sortable="false" Title="Photo">
                    <CellTemplate>
                        <MudAvatar Image="@context.PhotoPath" Size="Size.Large" />
                    </CellTemplate>
                </Column>
                <Column T="DepartmentUserVM" Field="FirstName" Title="First Name"/>
                <Column T="DepartmentUserVM" Field="LastName" Title="Last Name"/>
                <Column T="DepartmentUserVM" Field="IsActive" Title="Is Active">
                    <CellTemplate>
                         @(context.IsActive?"Yes":"No")
                    </CellTemplate>
                </Column>
                <Column T="DepartmentUserVM" Sortable="false" Title="Actions">
                    <CellTemplate>
                         <MudButtonGroup Style="text-align: center;" Size="Size.Small" DataLabel="Actions" Variant="Variant.Outlined" OverrideStyles="false">
                <MudButton Color="Color.Primary" OnClick="@(()=>EditProfile(context))" Variant="Variant.Outlined">@L["Edit User"]</MudButton>
                <MudButton Color="Color.Info" OnClick="@(()=>ShowProfile(context))"  Variant="Variant.Outlined">@L["Show profile"]</MudButton>
            </MudButtonGroup>
                    </CellTemplate>
                </Column>
            }
            else{
                   <Column T="DepartmentUserVM" Field="DepartmentId" Title="Id działu" />
                                <Column T="DepartmentUserVM" Title="Dział">
                    <CellTemplate>
                         @(string.IsNullOrWhiteSpace(context.DepartmentNamePl)? "nieprzypisany" : context.DepartmentNamePl)
                    </CellTemplate>
                </Column>
                <Column Sortable="false" T="DepartmentUserVM" Title="Zdjęcie">
                    <CellTemplate>
                        <MudAvatar Image="@context.PhotoPath" Size="Size.Large" />
                    </CellTemplate>
                </Column>
                <Column T="DepartmentUserVM" Field="FirstName" Title="Imię"/>
                <Column T="DepartmentUserVM" Field="LastName" Title="Nazwisko"/>
                <Column T="DepartmentUserVM" Field="IsActive" Title="Jest aktywny">
                    <CellTemplate>
                        @(context.IsActive?"Tak":"Nie")
                    </CellTemplate>
                </Column>
                <Column Sortable="false" T="DepartmentUserVM" Title="Działania">
                    <CellTemplate>
                         <MudButtonGroup Style="text-align: center;" Size="Size.Small" DataLabel="Actions" Variant="Variant.Outlined" OverrideStyles="false">
                <MudButton Color="Color.Primary" OnClick="@(()=>EditProfile(context))" Variant="Variant.Outlined">Edytuj użytkownika</MudButton>
                <MudButton Color="Color.Info" OnClick="@(()=>ShowProfile(context))"  Variant="Variant.Outlined">Pokaż profil</MudButton>
            </MudButtonGroup>
                    </CellTemplate>
                </Column>
            }
        </Columns>
        <PagerContent>
            <MudDataGridPager T="DepartmentUserVM" RowsPerPageString=@L["Next people"] />
        </PagerContent>
    </MudDataGrid>
}
